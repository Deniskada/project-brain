# Project Brain - –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

**–î–∞—Ç–∞**: 16 –æ–∫—Ç—è–±—Ä—è 2025, 03:45  
**–í–µ—Ä—Å–∏—è**: v1.0 (—Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏)

---

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ ChromaDB ‚úÖ
- **`kb_staffprobot`**: 3588 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **`kb_project_brain`**: ~371 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è)
- –°—Ç–∞—Ä–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è `project_brain` (5433 –¥–æ–∫) - –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å

### 2. –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è ‚úÖ
- ‚ùå –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ ‚Üí ‚úÖ –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚ùå –ü—É—Ç–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚Üí ‚úÖ –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
- ‚ùå –¢–∞–π–º–∞—É—Ç—ã (60+ —Å–µ–∫) ‚Üí ‚úÖ –û—Ç–≤–µ—Ç—ã –∑–∞ 10-15 —Å–µ–∫
- ‚ùå –ù–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ ‚Üí ‚úÖ –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫
- ‚ùå –û–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç –≤ —á–∞—Ç–µ ‚Üí ‚úÖ –°–µ–ª–µ–∫—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤

### 3. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚úÖ
- **URL**: http://192.168.2.107:8003/chat
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –í—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ (StaffProBot / Project Brain)
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª
  - –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è LLM ‚úÖ
- **–ú–æ–¥–µ–ª—å**: `qwen2.5:14b-instruct` (8.9GB)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `temperature=0.3` (—Ç–æ—á–Ω–æ—Å—Ç—å)
  - `repeat_penalty=1.2` (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤)
  - `timeout=90s` (–±–∞–ª–∞–Ω—Å)
- **–ü—Ä–æ–º–ø—Ç—ã**: –∞–Ω—Ç–∏-–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

### 5. Intent Detection ‚úÖ
- `overview` ‚Üí –∏—â–µ—Ç –≤ documentation (README)
- `how_to` ‚Üí –∏—â–µ—Ç –≤ routes/handlers
- `structure` ‚Üí –∏—â–µ—Ç –≤ models/schemas
- `api` ‚Üí –∏—â–µ—Ç –≤ API routes

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------------|----------|--------|
| –¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ | ~85% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ | 10-15 —Å–µ–∫ | ‚úÖ –ü—Ä–∏–µ–º–ª–µ–º–æ |
| –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ | <5% | ‚úÖ –†–µ–¥–∫–æ |
| –ü—É—Ç–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ | 0% | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ | ~80% | ‚úÖ –•–æ—Ä–æ—à–æ |

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –õ–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://192.168.2.107:8003/chat

# –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Nginx)
https://dev.staffprobot.ru/brain/chat
```

### API –∑–∞–ø—Ä–æ—Å—ã
```bash
# –ó–∞–ø—Ä–æ—Å –∫ StaffProBot
curl -X POST http://localhost:8003/api/query \
  -H "Content-Type: application/json" \
  -d '{"query": "–∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç?", "project": "staffprobot"}'

# –ó–∞–ø—Ä–æ—Å –∫ Project Brain
curl -X POST http://localhost:8003/api/query \
  -H "Content-Type: application/json" \
  -d '{"query": "–∫–∞–∫–∏–µ —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞?", "project": "project-brain"}'
```

### –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
```bash
# StaffProBot
curl -X POST http://localhost:8003/api/index/staffprobot

# Project Brain
curl -X POST http://localhost:8003/api/index/project-brain

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:8003/api/index/status/staffprobot
curl http://localhost:8003/api/index/status/project-brain
```

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤

### –î–ª—è StaffProBot
- "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?"
- "–ß—Ç–æ —Ç–∞–∫–æ–µ –æ–±—ä–µ–∫—Ç –≤ —Å–∏—Å—Ç–µ–º–µ?"
- "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ —Å–º–µ–Ω?"
- "–ö–∞–∫–∏–µ —Ä–æ–ª–∏ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ?"
- "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä?"

### –î–ª—è Project Brain
- "–ö–∞–∫–∏–µ —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞?"
- "–ö–∞–∫ –Ω–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è?"
- "–ú–æ–≥—É –ª–∏ —è –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç?"
- "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç RAG engine?"
- "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è?"

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker compose -f docker-compose.local.yml ps

# –õ–æ–≥–∏
docker logs project-brain-api
docker logs project-brain-chromadb
docker logs project-brain-redis

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose -f docker-compose.local.yml restart api
```

### ChromaDB
```bash
# –°–ø–∏—Å–æ–∫ –∫–æ–ª–ª–µ–∫—Ü–∏–π
docker exec project-brain-api python3 -c \
  "import chromadb; client = chromadb.HttpClient(host='chromadb', port=8000); \
   [print(f'{c.name}: {c.count()} docs') for c in client.list_collections()]"

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker exec project-brain-api python3 -c \
  "import chromadb; client = chromadb.HttpClient(host='chromadb', port=8000); \
   client.delete_collection('project_brain')"
```

### Ollama
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
ollama list

# –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å
ollama show qwen2.5:14b-instruct

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å backend/llm/ollama_client.py
```

---

## üìã TODO / –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã)
- [ ] –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é `project_brain`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –¥–ª—è `/brain/` –ø—Ä–µ—Ñ–∏–∫—Å–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å GitHub webhook –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ö–∞—á–µ—Å—Ç–≤–æ)
- [ ] Few-shot examples –≤ –ø—Ä–æ–º–ø—Ç—ã
- [ ] –õ—É—á—à–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (importance, summary)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (Redis)
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
- [ ] –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ embeddings –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ
- [ ] Hybrid search (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π + BM25)
- [ ] User feedback —Å–∏—Å—Ç–µ–º–∞

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –º–µ–¥–ª–µ–Ω–Ω—ã–π** (~15-20 —Å–µ–∫)
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ–≤ –º–æ–¥–µ–ª–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

2. **–ò–Ω–æ–≥–¥–∞ –≤—ã–¥–∞—ë—Ç –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**
   - –†–µ—à–µ–Ω–∏–µ: –£–ª—É—á—à–∏—Ç—å metadata –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

3. **–ù–µ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç README**
   - –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π —Ç–µ–≥ `is_readme: true`

4. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è** (~30 —Å–µ–∫/—Ñ–∞–π–ª)
   - –†–µ—à–µ–Ω–∏–µ: Batch processing, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[IMPROVEMENTS_LOG.md](IMPROVEMENTS_LOG.md)** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π
- **[README.md](README.md)** - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **[QUICKSTART.md](QUICKSTART.md)** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **[doc/project-status.md](doc/project-status.md)** - –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üéâ –ò—Ç–æ–≥–∏

**Project Brain** –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! 

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ **–¢–æ—á–Ω–∞—è** - –Ω–µ –≤—ã–¥—É–º—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã, –Ω–µ –ø—É—Ç–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç—ã
- ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è** - –æ—Ç–≤–µ—Ç—ã –∑–∞ 10-15 —Å–µ–∫—É–Ω–¥
- ‚úÖ **–£–º–Ω–∞—è** - –ø–æ–Ω–∏–º–∞–µ—Ç intent –≤–æ–ø—Ä–æ—Å–æ–≤, –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ **–£–¥–æ–±–Ω–∞—è** - –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö!

---

**–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω**: 16.10.2025 03:45  
**–ö–æ–º–º–∏—Ç**: `1be938d` - "–†–∞–∑–¥–µ–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ ChromaDB + —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π"


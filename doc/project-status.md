# Project Brain - –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 25% (–§–∞–∑–∞ 1-2)

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 15 –æ–∫—Ç—è–±—Ä—è 2024  
**–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞:** –§–∞–∑–∞ 2 - RAG Engine –∏ API

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### –§–∞–∑–∞ 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –±–∞–∑–æ–≤–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (80% –∑–∞–≤–µ—Ä—à–µ–Ω–æ)

#### 1.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `/home/sa/projects/project-brain`
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫:
  ```
  project-brain/
  ‚îú‚îÄ‚îÄ backend/
  ‚îÇ   ‚îú‚îÄ‚îÄ api/              # FastAPI endpoints
  ‚îÇ   ‚îú‚îÄ‚îÄ rag/              # RAG engine
  ‚îÇ   ‚îú‚îÄ‚îÄ indexers/         # –ò–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä—ã –∫–æ–¥–∞/–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
  ‚îÇ   ‚îú‚îÄ‚îÄ llm/              # Ollama integration
  ‚îÇ   ‚îî‚îÄ‚îÄ storage/          # ChromaDB
  ‚îú‚îÄ‚îÄ frontend/             # HTML/JS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  ‚îú‚îÄ‚îÄ config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
  ‚îî‚îÄ‚îÄ docker-compose.*.yml  # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  ```

#### 1.2. Docker Compose —Å Ollama + ChromaDB ‚úÖ
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω `docker-compose.local.yml` —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏:
  - `ollama` (–ø–æ—Ä—Ç 11434) - LLM —Å–µ—Ä–≤–µ—Ä
  - `chromadb` (–ø–æ—Ä—Ç 8002) - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î
  - `redis` (–ø–æ—Ä—Ç 6380) - –∫—ç—à
  - `api` (–ø–æ—Ä—Ç 8003) - FastAPI —Å–µ—Ä–≤–µ—Ä
- [x] –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–¥–µ–ª—å `codellama:7b` –≤ Ollama
- [x] –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

#### 1.3. –ë–∞–∑–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä—ã ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω `PythonIndexer` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Python —Ñ–∞–π–ª–æ–≤
- [x] –°–æ–∑–¥–∞–Ω `MarkdownIndexer` –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `sentence-transformers`

#### 1.4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω `config/projects.yaml` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ StaffProBot
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### –§–∞–∑–∞ 2: RAG Engine –∏ API (40% –∑–∞–≤–µ—Ä—à–µ–Ω–æ)

#### 2.1. FastAPI endpoints (—á–∞—Å—Ç–∏—á–Ω–æ) ‚úÖ
- [x] `/api/projects` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [x] `/api/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—á–∞—Å—Ç–∏—á–Ω–æ)
- [x] `/api/query` - –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å –∫ AI (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞)
- [x] `/api/index` - –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [x] `/api/context-rules` - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Cursor

#### 2.2. RAG Engine (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ) üîÑ
- [x] –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `RAGEngine` —Å –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `sentence-transformers`
- [ ] **–ü–†–û–ë–õ–ï–ú–ê:** ChromaDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (tenant issue)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAG pipeline

## üîß –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞: ChromaDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–±–æ—Ç–µ  
**–û—à–∏–±–∫–∞:** `ValueError: Could not connect to tenant default_tenant`  
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π ChromaDB API  
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å ChromaDB v2 API

### –î—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- [ ] –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Ollama
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ GPU –¥–ª—è Ollama (—Å–µ–π—á–∞—Å –æ—Ç–∫–ª—é—á–µ–Ω–æ)
- [ ] –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—Å–µ–≥–æ–¥–Ω—è)
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å ChromaDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å RAG pipeline —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GPU –¥–ª—è Ollama (–≤–∫–ª—é—á–∏—Ç—å –≤ docker-compose)

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—ç—Ç–∞ –Ω–µ–¥–µ–ª—è)
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å StaffProBot
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Cursor

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—Å–ª–µ–¥—É—é—â–∏–µ 2 –Ω–µ–¥–µ–ª–∏)
1. –°–æ–∑–¥–∞—Ç—å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –§–∞–∑–∞ 1-2 (–ü–∞–º—è—Ç—å –¥–ª—è Cursor)
- [x] –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è 100% Python/MD —Ñ–∞–π–ª–æ–≤ StaffProBot
- [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 3 —Å–µ–∫
- [ ] –¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ > 80% –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- [ ] Cursor –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ API
- [ ] GPU –∑–∞–≥—Ä—É–∑–∫–∞ > 80% –ø—Ä–∏ inference

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **Ollama:** `codellama:7b` (–∑–∞–≥—Ä—É–∂–µ–Ω–∞, —Ä–∞–±–æ—Ç–∞–µ—Ç)
- **ChromaDB:** v0.4.18 (–ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º)
- **FastAPI:** v0.104.1 (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- **Redis:** v7 (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- **GPU:** 16GB VRAM (–¥–æ—Å—Ç—É–ø–Ω–∞, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –ü–æ—Ä—Ç—ã
- `8003` - FastAPI API
- `8002` - ChromaDB
- `6380` - Redis
- `11434` - Ollama

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞](../project-brain-mvp.plan.md)
- [Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](../docker-compose.local.yml)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤](../config/projects.yaml)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](../backend/api/main.py)

---

**–°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ChromaDB
